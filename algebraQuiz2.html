<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>By Jamal 0598 Algebra Quiz - Grades 5-9 | English & Afaan Oromo</title>
    <style>
        /* Keep all the previous CSS styles */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #4a6fa5 0%, #2c5530 50%, #f8f9fa 100%);
            color: #333;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(to right, #2c5530, #4a6fa5);
            color: white;
            padding: 25px 30px;
            text-align: center;
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }
        
        .algebra-icon {
            font-size: 2rem;
            opacity: 0.9;
        }
        
        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
            margin-bottom: 25px;
        }
        
        .grade-selector, .language-selector {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 15px 0;
            flex-wrap: wrap;
        }
        
        .grade-btn, .lang-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 25px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.95rem;
        }
        
        .grade-btn {
            background: rgba(255,255,255,0.2);
            color: white;
            min-width: 80px;
        }
        
        .grade-btn.active {
            background: #ffc107;
            color: #333;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        
        .grade-btn:hover:not(.active) {
            background: rgba(255,255,255,0.3);
        }
        
        .lang-btn {
            background: rgba(255,255,255,0.15);
            color: white;
            min-width: 160px;
        }
        
        .lang-btn.active {
            background: #28a745;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        
        .lang-btn:hover:not(.active) {
            background: rgba(255,255,255,0.25);
        }
        
        #quiz-content {
            padding: 30px;
        }
        
        .progress {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 25px;
            border: 2px solid #e9ecef;
        }
        
        #question-counter {
            font-size: 1.1rem;
            font-weight: bold;
            color: #4a6fa5;
            margin-bottom: 10px;
        }
        
        .progress-bar {
            height: 10px;
            background: #e9ecef;
            border-radius: 5px;
            overflow: hidden;
            margin-bottom: 10px;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, #2c5530, #4a6fa5);
            width: 10%;
            transition: width 0.5s ease;
        }
        
        #grade-display {
            font-size: 1rem;
            color: #6c757d;
            text-align: right;
        }
        
        .quiz-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
        }
        
        .question-box {
            background: white;
            padding: 25px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            border-left: 5px solid #4a6fa5;
        }
        
        #question-text {
            font-size: 1.4rem;
            margin-bottom: 15px;
            color: #2c5530;
            line-height: 1.4;
        }
        
        .math-expression {
            font-size: 1.3rem;
            text-align: center;
            margin: 20px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 5px;
            border: 2px dashed #dee2e6;
            font-family: 'Cambria Math', serif;
        }
        
        .options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 25px;
        }
        
        .option {
            padding: 15px;
            background: white;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            text-align: center;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .option:hover {
            border-color: #4a6fa5;
            background: #f0f7ff;
            transform: translateY(-2px);
        }
        
        .option.selected {
            background: #ffc107;
            border-color: #ff9800;
            color: #333;
        }
        
        .option.correct {
            background: #28a745;
            border-color: #218838;
            color: white;
        }
        
        .option.incorrect {
            background: #dc3545;
            border-color: #c82333;
            color: white;
        }
        
        .hint-box {
            background: #fff3cd;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 5px solid #ffc107;
            display: none;
        }
        
        .hint-box h4 {
            color: #856404;
            margin-bottom: 10px;
        }
        
        .sound-info {
            background: #d1ecf1;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            color: #0c5460;
            border-left: 5px solid #17a2b8;
        }
        
        .controls {
            display: flex;
            justify-content: space-between;
            gap: 15px;
            margin-top: 25px;
        }
        
        .controls button {
            padding: 12px 25px;
            border: none;
            border-radius: 5px;
            font-weight: bold;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s;
        }
        
        #hint-btn {
            background: #ffc107;
            color: #333;
        }
        
        #hint-btn:hover {
            background: #e0a800;
        }
        
        #play-sound-btn {
            background: #17a2b8;
            color: white;
        }
        
        #play-sound-btn:hover {
            background: #138496;
        }
        
        #next-btn {
            background: #4a6fa5;
            color: white;
        }
        
        #next-btn:hover:not(:disabled) {
            background: #3a5a85;
        }
        
        #next-btn:disabled {
            background: #6c757d;
            cursor: not-allowed;
        }
        
        .result {
            background: white;
            padding: 25px;
            border-radius: 8px;
            margin-top: 25px;
            display: none;
            border-left: 5px solid #28a745;
        }
        
        #result-text {
            font-size: 1.2rem;
            margin-bottom: 15px;
        }
        
        .score {
            font-size: 1.3rem;
            font-weight: bold;
            color: #4a6fa5;
            text-align: center;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 5px;
        }
        
        @media (max-width: 768px) {
            .options {
                grid-template-columns: 1fr;
            }
            
            .controls {
                flex-direction: column;
            }
            
            h1 {
                font-size: 2rem;
                flex-direction: column;
                gap: 10px;
            }
            
            .grade-selector, .language-selector {
                gap: 5px;
            }
            
            .grade-btn, .lang-btn {
                padding: 8px 15px;
                font-size: 0.9rem;
            }
            
            .lang-btn {
                min-width: 140px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><span class="algebra-icon">洧논+洧녽=洧녾</span> Algebra Quiz <span class="algebra-icon">洧녩+洧녪=洧녫</span></h1>
            <div class="subtitle">By JA Math practice for grades 5-9 with audio in English and Afaan Oromo</div>
            
            <div class="grade-selector">
                <button class="grade-btn active" data-grade="5">Grade 5</button>
                <button class="grade-btn" data-grade="6">Grade 6</button>
                <button class="grade-btn" data-grade="7">Grade 7</button>
                <button class="grade-btn" data-grade="8">Grade 8</button>
                <button class="grade-btn" data-grade="9">Grade 9</button>
            </div>
            
            <div class="language-selector">
                <button id="lang-en" class="lang-btn active">English Audio</button>
                <button id="lang-om" class="lang-btn">Afaan Oromo Audio</button>
            </div>
        </header>
        
        <div id="quiz-content">
            <div class="progress">
                <div id="question-counter">Question 1 of 10</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>
                <div id="grade-display">Grade 5</div>
            </div>
            
            <div class="quiz-section">
                <div class="question-box">
                    <h3 id="question-text">If x = 5, what is the value of 3x + 2?</h3>
                    <div class="math-expression" id="math-expression">
                        3洧논 + 2, where 洧논 = 5
                    </div>
                    <div class="options" id="options-container">
                        <div class="option" data-index="0">15</div>
                        <div class="option" data-index="1">17</div>
                        <div class="option" data-index="2">20</div>
                        <div class="option" data-index="3">25</div>
                    </div>
                </div>
                
                <div class="hint-box" id="hint-box">
                    <h4>Hint:</h4>
                    <p id="hint-text">Substitute 5 for x: 3(5) + 2 = 15 + 2 = 17</p>
                </div>
                
                <div class="sound-info" id="sound-info">
                    Audio will play in English. Click the button below to hear the question.
                </div>
                
                <div class="controls">
                    <button id="hint-btn">Show Hint</button>
                    <button id="play-sound-btn">Play Question Audio</button>
                    <button id="next-btn">Next Question</button>
                </div>
                
                <div class="result" id="result">
                    <div id="result-text"></div>
                    <div class="score">Score: <span id="score-value">0</span> / <span id="total-questions">10</span></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Fixed Oromo translations
        const oromoTranslations = {
            grade5_q1: "Yoo x = 5 ta'e, 3x + 2 meeqa?",
            grade5_q2: "y barbaadi: y + 7 = 12",
            grade5_q3: "Mariyaan appilii 15 qabdi. Obbolessa isheetti tokko kennitee, appilii 8 qabdi. Meeqaan kennite?",
            
            grade6_q1: "Liqimsiisi: 4x + 3x - 2x",
            grade6_q2: "n barbaadi: 3n = 18",
            grade6_q3: "Yoo a = 3 ta'e, 2a + 5 meeqa?",
            
            grade7_q1: "Furii argadhu: 2x - 5 = 11",
            grade7_q2: "Liqimsiisi: 5(x + 3) - 2x",
            grade7_q3: "Ida'ama lakkoofsaa tokkoo fi 9 = 25. Lakkoofsi sun meeqa?",
            
            grade8_q1: "Furii argadhu: 3(x - 4) = 15",
            grade8_q2: "Faktaaraa godhaa: x + 5x + 6",
            grade8_q3: "Furii argadhu: 2x + 7 = 3x - 2",
            
            grade9_q1: "Furii argadhu: x - 9 = 0",
            grade9_q2: "Liqimsiisi: (2x + 3x - 5) + (x - 2x + 7)",
            grade9_q3: "Sirna walsimsiisaa furi: y = 2x + 1 fi y = x + 3",
            
            correct: "Sirriidha! Bareedaa!",
            incorrect: "Dogoggora. Deebii sirrii arga.",
            hint: "Qaccee: ",
            audio_playing: "Dubbii Afaan Oromootiin dhaggeeffama...",
            audio_prompt: "Dubbii Afaan Oromootiin dhaggeeffama. Gaaffii dhaggeeffachuuf cuqaasaan guuti.",
            question: "Gaaffii",
            score: "Qarshii",
            completed: "Qiizii xumuramte.",
            excellent: "Bareedaa! Algebra keessatti dandeettii guddaa qabda!",
            good: "Hojii gaarii! Algebra sirrii hubatta.",
            average: "Tole! Ittiin fufiinsi barbaachisaa dha.",
            needs_work: "Algebra yaali qaba. Baradhu itti yaali!"
        };

        // Algebra questions with fixed Oromo audio
        const algebraQuestions = {
            5: [
                {
                    id: 1,
                    type: "expression",
                    question: "If x = 5, what is the value of 3x + 2?",
                    expression: "3洧논 + 2, where 洧논 = 5",
                    options: ["15", "17", "20", "25"],
                    correctAnswer: 1,
                    hint: "Substitute 5 for x: 3(5) + 2 = 15 + 2 = 17",
                    englishAudio: "If x equals 5, what is the value of 3x plus 2?",
                    oromoAudio: oromoTranslations.grade5_q1
                },
                {
                    id: 2,
                    type: "equation",
                    question: "Solve for y: y + 7 = 12",
                    expression: "洧녽 + 7 = 12",
                    options: ["y = 3", "y = 5", "y = 7", "y = 12"],
                    correctAnswer: 1,
                    hint: "Subtract 7 from both sides: y = 12 - 7 = 5",
                    englishAudio: "Solve for y: y plus 7 equals 12.",
                    oromoAudio: oromoTranslations.grade5_q2
                },
                {
                    id: 3,
                    type: "word",
                    question: "Maria has 15 apples. She gives some to her brother and has 8 left. How many did she give away?",
                    expression: "15 - 洧논 = 8",
                    options: ["5 apples", "7 apples", "8 apples", "10 apples"],
                    correctAnswer: 1,
                    hint: "Set up equation: 15 - x = 8. Then x = 15 - 8 = 7",
                    englishAudio: "Maria has 15 apples. She gives some to her brother and has 8 left. How many did she give away?",
                    oromoAudio: oromoTranslations.grade5_q3
                },
                {
                    id: 4,
                    type: "expression",
                    question: "What is 2 times x plus 3 when x equals 4?",
                    expression: "2洧논 + 3, where 洧논 = 4",
                    options: ["8", "11", "14", "15"],
                    correctAnswer: 1,
                    hint: "2(4) + 3 = 8 + 3 = 11",
                    englishAudio: "What is 2 times x plus 3 when x equals 4?",
                    oromoAudio: "Yoo x = 4 ta'e, 2x + 3 meeqa?"
                },
                {
                    id: 5,
                    type: "equation",
                    question: "Solve: 4 + x = 9",
                    expression: "4 + 洧논 = 9",
                    options: ["x = 3", "x = 4", "x = 5", "x = 6"],
                    correctAnswer: 2,
                    hint: "Subtract 4 from both sides: x = 9 - 4 = 5",
                    englishAudio: "Solve: 4 plus x equals 9",
                    oromoAudio: "Furii argadhu: 4 + x = 9"
                }
            ],
            6: [
                {
                    id: 1,
                    type: "expression",
                    question: "Simplify: 4x + 3x - 2x",
                    expression: "4洧논 + 3洧논 - 2洧논",
                    options: ["5x", "6x", "7x", "9x"],
                    correctAnswer: 0,
                    hint: "Combine like terms: 4x + 3x = 7x, then 7x - 2x = 5x",
                    englishAudio: "Simplify: 4x plus 3x minus 2x",
                    oromoAudio: oromoTranslations.grade6_q1
                },
                {
                    id: 2,
                    type: "equation",
                    question: "Solve for n: 3n = 18",
                    expression: "3洧녵 = 18",
                    options: ["n = 4", "n = 5", "n = 6", "n = 9"],
                    correctAnswer: 2,
                    hint: "Divide both sides by 3: n = 18 칭 3 = 6",
                    englishAudio: "Solve for n: 3n equals 18",
                    oromoAudio: oromoTranslations.grade6_q2
                },
                {
                    id: 3,
                    type: "expression",
                    question: "Evaluate 2a + 5 when a = 3",
                    expression: "2洧녩 + 5, where 洧녩 = 3",
                    options: ["10", "11", "12", "13"],
                    correctAnswer: 1,
                    hint: "Substitute 3 for a: 2(3) + 5 = 6 + 5 = 11",
                    englishAudio: "Evaluate 2a plus 5 when a equals 3",
                    oromoAudio: oromoTranslations.grade6_q3
                },
                {
                    id: 4,
                    type: "expression",
                    question: "Simplify: 5x - 2x + 3x",
                    expression: "5洧논 - 2洧논 + 3洧논",
                    options: ["5x", "6x", "7x", "8x"],
                    correctAnswer: 1,
                    hint: "5x - 2x = 3x, then 3x + 3x = 6x",
                    englishAudio: "Simplify: 5x minus 2x plus 3x",
                    oromoAudio: "Liqimsiisi: 5x - 2x + 3x"
                },
                {
                    id: 5,
                    type: "equation",
                    question: "Solve: 2x = 14",
                    expression: "2洧논 = 14",
                    options: ["x = 6", "x = 7", "x = 8", "x = 9"],
                    correctAnswer: 1,
                    hint: "Divide both sides by 2: x = 14 칭 2 = 7",
                    englishAudio: "Solve: 2x equals 14",
                    oromoAudio: "Furii argadhu: 2x = 14"
                }
            ],
            7: [
                {
                    id: 1,
                    type: "equation",
                    question: "Solve: 2x - 5 = 11",
                    expression: "2洧논 - 5 = 11",
                    options: ["x = 3", "x = 6", "x = 8", "x = 16"],
                    correctAnswer: 2,
                    hint: "Add 5 to both sides: 2x = 16, then divide by 2: x = 8",
                    englishAudio: "Solve: 2x minus 5 equals 11",
                    oromoAudio: oromoTranslations.grade7_q1
                },
                {
                    id: 2,
                    type: "expression",
                    question: "Simplify: 5(x + 3) - 2x",
                    expression: "5(洧논 + 3) - 2洧논",
                    options: ["3x + 15", "3x + 3", "7x + 15", "5x + 13"],
                    correctAnswer: 0,
                    hint: "Distribute: 5(x+3) = 5x + 15. Then 5x + 15 - 2x = 3x + 15",
                    englishAudio: "Simplify: 5 times open parenthesis x plus 3 close parenthesis minus 2x",
                    oromoAudio: oromoTranslations.grade7_q2
                },
                {
                    id: 3,
                    type: "word",
                    question: "The sum of a number and 9 is 25. What is the number?",
                    expression: "洧논 + 9 = 25",
                    options: ["14", "16", "18", "20"],
                    correctAnswer: 1,
                    hint: "Set up equation: x + 9 = 25. Then x = 25 - 9 = 16",
                    englishAudio: "The sum of a number and 9 is 25. What is the number?",
                    oromoAudio: oromoTranslations.grade7_q3
                },
                {
                    id: 4,
                    type: "equation",
                    question: "Solve: 3x + 4 = 19",
                    expression: "3洧논 + 4 = 19",
                    options: ["x = 3", "x = 4", "x = 5", "x = 6"],
                    correctAnswer: 2,
                    hint: "Subtract 4: 3x = 15, then divide by 3: x = 5",
                    englishAudio: "Solve: 3x plus 4 equals 19",
                    oromoAudio: "Furii argadhu: 3x + 4 = 19"
                },
                {
                    id: 5,
                    type: "expression",
                    question: "Simplify: 2(x - 3) + 4x",
                    expression: "2(洧논 - 3) + 4洧논",
                    options: ["6x - 6", "6x - 3", "2x + 6", "6x + 6"],
                    correctAnswer: 0,
                    hint: "2(x-3) = 2x - 6, then 2x - 6 + 4x = 6x - 6",
                    englishAudio: "Simplify: 2 times open parenthesis x minus 3 close parenthesis plus 4x",
                    oromoAudio: "Liqimsiisi: 2(x - 3) + 4x"
                }
            ],
            8: [
                {
                    id: 1,
                    type: "equation",
                    question: "Solve: 3(x - 4) = 15",
                    expression: "3(洧논 - 4) = 15",
                    options: ["x = 3", "x = 5", "x = 7", "x = 9"],
                    correctAnswer: 3,
                    hint: "Divide both sides by 3: x - 4 = 5, then add 4: x = 9",
                    englishAudio: "Solve: 3 times open parenthesis x minus 4 close parenthesis equals 15",
                    oromoAudio: oromoTranslations.grade8_q1
                },
                {
                    id: 2,
                    type: "expression",
                    question: "Factor: x + 5x + 6",
                    expression: "洧논 + 5洧논 + 6",
                    options: ["(x+2)(x+3)", "(x+1)(x+6)", "(x+2)(x+4)", "(x+3)(x+3)"],
                    correctAnswer: 0,
                    hint: "Find two numbers that multiply to 6 and add to 5: 2 and 3",
                    englishAudio: "Factor: x squared plus 5x plus 6",
                    oromoAudio: oromoTranslations.grade8_q2
                },
                {
                    id: 3,
                    type: "equation",
                    question: "Solve: 2x + 7 = 3x - 2",
                    expression: "2洧논 + 7 = 3洧논 - 2",
                    options: ["x = 5", "x = 7", "x = 9", "x = 11"],
                    correctAnswer: 2,
                    hint: "Subtract 2x from both sides: 7 = x - 2, then add 2: x = 9",
                    englishAudio: "Solve: 2x plus 7 equals 3x minus 2",
                    oromoAudio: oromoTranslations.grade8_q3
                },
                {
                    id: 4,
                    type: "equation",
                    question: "Solve: 4(x + 2) = 24",
                    expression: "4(洧논 + 2) = 24",
                    options: ["x = 2", "x = 4", "x = 6", "x = 8"],
                    correctAnswer: 1,
                    hint: "Divide by 4: x + 2 = 6, then subtract 2: x = 4",
                    englishAudio: "Solve: 4 times open parenthesis x plus 2 close parenthesis equals 24",
                    oromoAudio: "Furii argadhu: 4(x + 2) = 24"
                },
                {
                    id: 5,
                    type: "expression",
                    question: "Expand: (x + 3)(x + 4)",
                    expression: "(洧논 + 3)(洧논 + 4)",
                    options: ["x + 7x + 12", "x + 12x + 7", "x + 7x + 7", "x + 12x + 12"],
                    correctAnswer: 0,
                    hint: "FOIL method: x + 4x + 3x + 12 = x + 7x + 12",
                    englishAudio: "Expand: open parenthesis x plus 3 close parenthesis times open parenthesis x plus 4 close parenthesis",
                    oromoAudio: "Bu'aa godhaa: (x + 3)(x + 4)"
                }
            ],
            9: [
                {
                    id: 1,
                    type: "equation",
                    question: "Solve: x - 9 = 0",
                    expression: "洧논 - 9 = 0",
                    options: ["x = 3", "x = -3", "x = 췀3", "x = 9"],
                    correctAnswer: 2,
                    hint: "Add 9 to both sides: x = 9, then take square root: x = 췀3",
                    englishAudio: "Solve: x squared minus 9 equals 0",
                    oromoAudio: oromoTranslations.grade9_q1
                },
                {
                    id: 2,
                    type: "expression",
                    question: "Simplify: (2x + 3x - 5) + (x - 2x + 7)",
                    expression: "(2洧논 + 3洧논 - 5) + (洧논 - 2洧논 + 7)",
                    options: ["3x + x + 2", "3x + 5x + 2", "x + x + 2", "3x - x + 2"],
                    correctAnswer: 0,
                    hint: "Combine like terms: 2x + x = 3x, 3x - 2x = x, -5 + 7 = 2",
                    englishAudio: "Simplify: open parenthesis 2x squared plus 3x minus 5 close parenthesis plus open parenthesis x squared minus 2x plus 7 close parenthesis",
                    oromoAudio: oromoTranslations.grade9_q2
                },
                {
                    id: 3,
                    type: "equation",
                    question: "Solve the system: y = 2x + 1 and y = x + 3",
                    expression: "洧녽 = 2洧논 + 1 and 洧녽 = 洧논 + 3",
                    options: ["(1, 3)", "(2, 5)", "(3, 7)", "(4, 9)"],
                    correctAnswer: 1,
                    hint: "Set equations equal: 2x + 1 = x + 3, solve for x = 2, then y = 2(2)+1 = 5",
                    englishAudio: "Solve the system: y equals 2x plus 1 and y equals x plus 3",
                    oromoAudio: oromoTranslations.grade9_q3
                },
                {
                    id: 4,
                    type: "equation",
                    question: "Solve: 2x - 8 = 0",
                    expression: "2洧논 - 8 = 0",
                    options: ["x = 췀1", "x = 췀2", "x = 췀3", "x = 췀4"],
                    correctAnswer: 1,
                    hint: "Add 8: 2x = 8, divide by 2: x = 4, square root: x = 췀2",
                    englishAudio: "Solve: 2x squared minus 8 equals 0",
                    oromoAudio: "Furii argadhu: 2x - 8 = 0"
                },
                {
                    id: 5,
                    type: "expression",
                    question: "Simplify: 3(x - 2)",
                    expression: "3(洧논 - 2)",
                    options: ["3x - 12x + 12", "3x - 6x + 12", "3x - 12x + 6", "3x - 6x + 6"],
                    correctAnswer: 0,
                    hint: "(x-2) = x - 4x + 4, then multiply by 3: 3x - 12x + 12",
                    englishAudio: "Simplify: 3 times open parenthesis x minus 2 close parenthesis squared",
                    oromoAudio: "Liqimsiisi: 3(x - 2)"
                }
            ]
        };

        // Get references to UI elements
        const questionText = document.getElementById('question-text');
        const mathExpression = document.getElementById('math-expression');
        const optionsContainer = document.getElementById('options-container');
        const hintText = document.getElementById('hint-text');
        const soundInfo = document.getElementById('sound-info');
        const resultText = document.getElementById('result-text');
        const scoreValue = document.getElementById('score-value');
        const totalQuestions = document.getElementById('total-questions');
        const gradeDisplay = document.getElementById('grade-display');
        const questionCounter = document.getElementById('question-counter');
        const progressFill = document.getElementById('progress-fill');

        // Get buttons
        const gradeButtons = document.querySelectorAll('.grade-btn');
        const langEnBtn = document.getElementById('lang-en');
        const langOmBtn = document.getElementById('lang-om');
        const hintBtn = document.getElementById('hint-btn');
        const playSoundBtn = document.getElementById('play-sound-btn');
        const nextBtn = document.getElementById('next-btn');

        // Quiz state
        let currentLanguage = 'en';
        let currentGrade = 5;
        let currentQuestionIndex = 0;
        let score = 0;
        let questions = [];
        const totalQs = 10;

        // Initialize quiz
        function initializeQuiz() {
            selectGrade(5);
            setupEventListeners();
        }

        function selectGrade(grade) {
            currentGrade = grade;
            
            // Update active button
            gradeButtons.forEach(btn => {
                btn.classList.toggle('active', parseInt(btn.dataset.grade) === grade);
            });
            
            // Update display
            gradeDisplay.textContent = `Grade ${grade}`;
            
            // Get questions for this grade
            const gradeQuestions = algebraQuestions[grade];
            
            // Create a full set of 10 questions (repeating if needed)
            questions = [];
            for (let i = 0; i < totalQs; i++) {
                const questionIndex = i % gradeQuestions.length;
                questions.push({...gradeQuestions[questionIndex]});
                questions[i].id = i + 1;
            }
            
            // Reset quiz state
            currentQuestionIndex = 0;
            score = 0;
            
            // Load first question
            loadQuestion(currentQuestionIndex);
        }

        function switchLanguage(lang) {
            currentLanguage = lang;
            
            // Update active button
            langEnBtn.classList.toggle('active', lang === 'en');
            langOmBtn.classList.toggle('active', lang === 'om');
            
            // Update sound info text
            if (lang === 'en') {
                soundInfo.textContent = 'Audio will play in English. Click the button below to hear the question.';
            } else {
                soundInfo.textContent = oromoTranslations.audio_prompt;
            }
            
            // Play audio for the current question
            playQuestionAudio();
        }

        function loadQuestion(index) {
            const question = questions[index];
            
            // Update progress
            const progressPercent = ((index + 1) / totalQs) * 100;
            progressFill.style.width = `${progressPercent}%`;
            questionCounter.textContent = `Question ${index + 1} of ${totalQs}`;
            
            // Set question text
            questionText.textContent = `${index + 1}. ${question.question}`;
            
            // Set math expression
            mathExpression.textContent = question.expression;
            
            // Set hint text
            hintText.textContent = question.hint;
            
            // Clear previous options
            optionsContainer.innerHTML = '';
            
            // Create option elements
            question.options.forEach((option, optionIndex) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.textContent = option;
                optionElement.dataset.index = optionIndex;
                
                optionElement.addEventListener('click', () => selectOption(optionElement, optionIndex, question.correctAnswer));
                
                optionsContainer.appendChild(optionElement);
            });
            
            // Reset UI state
            document.getElementById('result').style.display = 'none';
            document.getElementById('hint-box').style.display = 'none';
            nextBtn.disabled = true;
            
            // Reset all options to clickable
            const options = document.querySelectorAll('.option');
            options.forEach(opt => {
                opt.style.pointerEvents = 'auto';
                opt.classList.remove('selected', 'correct', 'incorrect');
            });
            
            // Update score display
            scoreValue.textContent = score;
            totalQuestions.textContent = totalQs;
            
            // Play audio for the question
            playQuestionAudio();
        }

        function selectOption(optionElement, selectedIndex, correctIndex) {
            const options = document.querySelectorAll('.option');
            
            // Disable all options
            options.forEach(opt => {
                opt.style.pointerEvents = 'none';
            });
            
            // Mark selected option
            optionElement.classList.add('selected');
            
            // Check if answer is correct
            if (selectedIndex === correctIndex) {
                optionElement.classList.add('correct');
                resultText.textContent = currentLanguage === 'en' 
                    ? 'Correct! Well done!' 
                    : oromoTranslations.correct;
                resultText.style.color = '#28a745';
                score++;
            } else {
                optionElement.classList.add('incorrect');
                resultText.textContent = currentLanguage === 'en'
                    ? 'Incorrect. The right answer is highlighted.'
                    : oromoTranslations.incorrect;
                resultText.style.color = '#dc3545';
                
                // Highlight correct answer
                options[correctIndex].classList.add('correct');
            }
            
            // Show result and enable next button
            document.getElementById('result').style.display = 'block';
            nextBtn.disabled = false;
            
            // Update score display
            scoreValue.textContent = score;
        }

        function playQuestionAudio() {
            const question = questions[currentQuestionIndex];
            const audioText = currentLanguage === 'en' ? question.englishAudio : question.oromoAudio;
            
            // Use Web Speech API
            if ('speechSynthesis' in window) {
                // Cancel any ongoing speech
                speechSynthesis.cancel();
                
                const utterance = new SpeechSynthesisUtterance(audioText);
                utterance.lang = currentLanguage === 'en' ? 'en-US' : 'am-ET';
                utterance.rate = 0.9;
                utterance.volume = 1;
                
                // Update sound info
                soundInfo.style.color = '#4a6fa5';
                soundInfo.innerHTML = currentLanguage === 'en' 
                    ? '<strong>Playing audio in English...</strong>'
                    : `<strong>${oromoTranslations.audio_playing}</strong>`;
                
                // Speak the question
                speechSynthesis.speak(utterance);
                
                // Reset sound info after speaking
                utterance.onend = function() {
                    setTimeout(() => {
                        if (currentLanguage === 'en') {
                            soundInfo.innerHTML = 'Audio will play in English. Click the button below to hear the question.';
                        } else {
                            soundInfo.innerHTML = oromoTranslations.audio_prompt;
                        }
                        soundInfo.style.color = '#0c5460';
                    }, 1000);
                };
            }
        }

        function nextQuestion() {
            currentQuestionIndex++;
            
            if (currentQuestionIndex < totalQs) {
                loadQuestion(currentQuestionIndex);
            } else {
                showFinalResults();
            }
        }

        function showFinalResults() {
            const percentage = Math.round((score / totalQs) * 100);
            
            // Update progress to 100%
            progressFill.style.width = '100%';
            questionCounter.textContent = 'Quiz Completed!';
            
            // Show final results
            questionText.textContent = 'Algebra Quiz Completed!';
            mathExpression.style.display = 'none';
            optionsContainer.innerHTML = '';
            document.getElementById('hint-box').style.display = 'none';
            soundInfo.style.display = 'none';
            hintBtn.style.display = 'none';
            playSoundBtn.style.display = 'none';
            
            let message;
            if (currentLanguage === 'en') {
                if (percentage >= 90) message = "Outstanding! You're an algebra expert!";
                else if (percentage >= 80) message = "Excellent work! You understand algebra well.";
                else if (percentage >= 70) message = "Good job! You're getting the hang of algebra.";
                else if (percentage >= 60) message = "Not bad! Keep practicing to improve.";
                else message = "Algebra takes practice. Keep learning and try again!";
            } else {
                if (percentage >= 90) message = oromoTranslations.excellent;
                else if (percentage >= 80) message = oromoTranslations.good;
                else if (percentage >= 70) message = oromoTranslations.average;
                else if (percentage >= 60) message = "Tole! Itti fufiinsaan yaali.";
                else message = oromoTranslations.needs_work;
            }
            
            resultText.innerHTML = `
                <p><strong>${currentLanguage === 'en' ? 'Your final score:' : 'Qarshii xumuraa:'}</strong> ${score} ${currentLanguage === 'en' ? 'out of' : 'irraa'} ${totalQs}</p>
                <p><strong>${currentLanguage === 'en' ? 'Percentage:' : 'Sadarkaa:'}</strong> ${percentage}%</p>
                <p>${message}</p>
                <button onclick="restartQuiz()" style="margin-top: 20px; padding: 12px 25px; background: linear-gradient(to right, #2c5530, #4a6fa5); color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; font-size: 1rem;">
                    ${currentLanguage === 'en' ? 'Try Another Grade Level' : 'Sadarkaa Biroo Yaali'}
                </button>
            `;
            document.getElementById('result').style.display = 'block';
        }

        function restartQuiz() {
            // Reset UI
            mathExpression.style.display = 'block';
            soundInfo.style.display = 'block';
            hintBtn.style.display = 'block';
            playSoundBtn.style.display = 'block';
            
            // Reload current grade
            selectGrade(currentGrade);
        }

        function setupEventListeners() {
            // Grade buttons
            gradeButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    selectGrade(parseInt(btn.dataset.grade));
                });
            });
            
            // Language buttons
            langEnBtn.addEventListener('click', () => switchLanguage('en'));
            langOmBtn.addEventListener('click', () => switchLanguage('om'));
            
            // Control buttons
            hintBtn.addEventListener('click', () => {
                document.getElementById('hint-box').style.display = 'block';
            });
            
            playSoundBtn.addEventListener('click', playQuestionAudio);
            nextBtn.addEventListener('click', nextQuestion);
        }

        // Initialize the quiz when page loads
        window.addEventListener('load', initializeQuiz);
        
        // Make restartQuiz available globally
        window.restartQuiz = restartQuiz;
    </script>
</body>
</html>



