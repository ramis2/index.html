<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>By JA 0598 Math Answer System - Numerical Answers Only</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .header p {
            opacity: 0.9;
            font-size: 1.1rem;
        }
        
        .content {
            padding: 30px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }
        
        @media (max-width: 768px) {
            .content {
                grid-template-columns: 1fr;
            }
        }
        
        .section {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            border: 1px solid #e9ecef;
        }
        
        .section h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 10px;
            padding-bottom: 15px;
            border-bottom: 2px solid #667eea;
        }
        
        .section h2 i {
            color: #667eea;
        }
        
        .problem-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }
        
        .problem-card.active {
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.2);
        }
        
        .problem-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .problem-number {
            background: #667eea;
            color: white;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.1rem;
        }
        
        .problem-type {
            background: #e9ecef;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            color: #555;
        }
        
        .problem-statement {
            font-size: 1.1rem;
            margin-bottom: 20px;
            line-height: 1.6;
            min-height: 80px;
        }
        
        .problem-statement .math-expr {
            font-family: 'Cambria Math', serif;
            font-size: 1.2rem;
            color: #2c3e50;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
            display: inline-block;
            margin: 5px 0;
        }
        
        .input-group {
            margin-bottom: 15px;
        }
        
        .input-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
            font-size: 0.95rem;
        }
        
        .answer-input {
            width: 100%;
            padding: 14px;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            font-family: monospace;
            text-align: center;
        }
        
        .answer-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .input-hint {
            font-size: 0.85rem;
            color: #6c757d;
            margin-top: 8px;
            font-style: italic;
        }
        
        .feedback {
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            font-weight: 600;
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .feedback.correct {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
            display: block;
        }
        
        .feedback.incorrect {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
            display: block;
        }
        
        .feedback .correct-answer {
            font-weight: bold;
            color: #155724;
            font-family: monospace;
            font-size: 1.1rem;
        }
        
        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 14px 28px;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            width: 100%;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .btn-success {
            background: linear-gradient(135deg, #38b000 0%, #2dc653 100%);
        }
        
        .btn-warning {
            background: linear-gradient(135deg, #ffbe0b 0%, #ff9100 100%);
        }
        
        .stats-panel {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            text-align: center;
        }
        
        .stat-item {
            padding: 15px;
            border-radius: 10px;
            background: #f8f9fa;
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 5px;
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: #6c757d;
        }
        
        .progress-bar {
            height: 10px;
            background: #e9ecef;
            border-radius: 5px;
            margin-top: 20px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            border-radius: 5px;
            transition: width 0.5s ease;
        }
        
        .instructions {
            background: #fff8e6;
            border-left: 4px solid #ffc107;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 25px;
        }
        
        .instructions h3 {
            color: #856404;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .instructions ul {
            padding-left: 20px;
            color: #856404;
        }
        
        .instructions li {
            margin-bottom: 8px;
        }
        
        .example-box {
            background: white;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
            font-family: monospace;
        }
        
        .example-box .correct {
            color: #38b000;
            font-weight: bold;
        }
        
        .example-box .incorrect {
            color: #ff006e;
            text-decoration: line-through;
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1><i class="fas fa-calculator"></i> Numerical Answers System</h1>
            <p>Enter decimal answers only - No symbols like √, π, or fractions required</p>
        </div>
        
        <div class="content">
            <!-- Left Column: Problems -->
            <div class="left-column">
                <div class="section">
                    <h2><i class="fas fa-list-ol"></i> Math Problems</h2>
                    
                    <div class="instructions">
                        <h3><i class="fas fa-info-circle"></i> How to Answer:</h3>
                        <ul>
                            <li>Enter <strong>decimal numbers only</strong></li>
                            <li><strong>Do NOT use symbols</strong> like √, π, or fractions</li>
                            <li>Round to <strong>2 decimal places</strong> unless specified</li>
                            <li>Use <strong>negative signs</strong> for negative answers</li>
                        </ul>
                        
                        <div class="example-box">
                            <p><strong>Examples:</strong></p>
                            <p>Question: √25 = ? → Answer: <span class="correct">5</span> (not "√25" or "5√1")</p>
                            <p>Question: 3π ≈ ? → Answer: <span class="correct">9.42</span> (not "3π" or "3*pi")</p>
                            <p>Question: ½ = ? → Answer: <span class="correct">0.5</span> (not "1/2")</p>
                        </div>
                    </div>
                    
                    <div id="problemsContainer">
                        <!-- Problems will be loaded here -->
                    </div>
                    
                    <div class="stats-panel">
                        <div class="stats-grid">
                            <div class="stat-item">
                                <div class="stat-value" id="score">0</div>
                                <div class="stat-label">Score</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value" id="correctCount">0</div>
                                <div class="stat-label">Correct</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value" id="totalAttempts">0</div>
                                <div class="stat-label">Attempts</div>
                            </div>
                        </div>
                        
                        <div class="progress-bar">
                            <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Right Column: Answer Checker & Tools -->
            <div class="right-column">
                <div class="section">
                    <h2><i class="fas fa-check-circle"></i> Answer Checker</h2>
                    
                    <div class="problem-card active">
                        <div class="problem-header">
                            <div class="problem-number" id="currentProblemNum">1</div>
                            <div class="problem-type" id="currentProblemType">Square Root</div>
                        </div>
                        
                        <div class="problem-statement" id="currentProblem">
                            What is √16?
                        </div>
                        
                        <div class="input-group">
                            <label class="input-label">Your Answer (decimal number):</label>
                            <input 
                                type="text" 
                                id="answerInput" 
                                class="answer-input" 
                                placeholder="Enter number only..."
                                autocomplete="off"
                            >
                            <div class="input-hint">
                                Enter only numbers and decimal point. Example: 4.56
                            </div>
                        </div>
                        
                        <button id="checkAnswer" class="btn">
                            <i class="fas fa-check"></i> Check Answer
                        </button>
                        
                        <div id="feedback" class="feedback"></div>
                    </div>
                    
                    <div style="margin-top: 20px; display: flex; gap: 10px;">
                        <button id="prevProblem" class="btn btn-warning">
                            <i class="fas fa-arrow-left"></i> Previous
                        </button>
                        <button id="nextProblem" class="btn">
                            Next <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                    
                    <div style="margin-top: 25px;">
                        <button id="generateProblems" class="btn">
                            <i class="fas fa-redo"></i> Generate New Problems
                        </button>
                    </div>
                </div>
                
                <div class="section" style="margin-top: 20px;">
                    <h2><i class="fas fa-tools"></i> Calculator Tools</h2>
                    
                    <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-bottom: 20px;">
                        <button class="calc-btn" data-value="√">√</button>
                        <button class="calc-btn" data-value="π">π</button>
                        <button class="calc-btn" data-value="½">½</button>
                        <button class="calc-btn" data-value="÷">÷</button>
                        <button class="calc-btn" data-value="7">7</button>
                        <button class="calc-btn" data-value="8">8</button>
                        <button class="calc-btn" data-value="9">9</button>
                        <button class="calc-btn" data-value="×">×</button>
                        <button class="calc-btn" data-value="4">4</button>
                        <button class="calc-btn" data-value="5">5</button>
                        <button class="calc-btn" data-value="6">6</button>
                        <button class="calc-btn" data-value="-">-</button>
                        <button class="calc-btn" data-value="1">1</button>
                        <button class="calc-btn" data-value="2">2</button>
                        <button class="calc-btn" data-value="3">3</button>
                        <button class="calc-btn" data-value="+">+</button>
                        <button class="calc-btn" data-value="0">0</button>
                        <button class="calc-btn" data-value=".">.</button>
                        <button class="calc-btn" data-value="-">(-)</button>
                        <button id="clearCalc" style="background: #ff006e; color: white;">C</button>
                    </div>
                    
                    <div class="input-group">
                        <label class="input-label">Calculator Result:</label>
                        <input 
                            type="text" 
                            id="calcResult" 
                            class="answer-input" 
                            readonly
                            placeholder="Use buttons above to calculate..."
                        >
                    </div>
                    
                    <button id="useCalcResult" class="btn btn-success" style="margin-top: 15px;">
                        <i class="fas fa-arrow-right"></i> Use This as Answer
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Math Answer System Configuration
        const mathSystem = {
            currentProblemIndex: 0,
            problems: [],
            userAnswers: {},
            score: 0,
            correctCount: 0,
            totalAttempts: 0,
            
            // Problem categories and generators
            problemTypes: [
                {
                    name: "Square Roots",
                    generator: () => {
                        const num = Math.floor(Math.random() * 100) + 1;
                        const answer = Math.sqrt(num).toFixed(2);
                        return {
                            question: `What is √${num}?`,
                            answer: parseFloat(answer),
                            type: "Square Root"
                        };
                    }
                },
                {
                    name: "Pi Multiples",
                    generator: () => {
                        const multiplier = Math.floor(Math.random() * 10) + 1;
                        const answer = (multiplier * Math.PI).toFixed(2);
                        return {
                            question: `What is ${multiplier}π? (Approximate to 2 decimal places)`,
                            answer: parseFloat(answer),
                            type: "Pi Multiple"
                        };
                    }
                },
                {
                    name: "Fractions to Decimals",
                    generator: () => {
                        const numerator = Math.floor(Math.random() * 10) + 1;
                        const denominator = Math.floor(Math.random() * 10) + 1;
                        const answer = (numerator / denominator).toFixed(2);
                        return {
                            question: `Convert ${numerator}/${denominator} to a decimal`,
                            answer: parseFloat(answer),
                            type: "Fraction Conversion"
                        };
                    }
                },
                {
                    name: "Simple Equations",
                    generator: () => {
                        const a = Math.floor(Math.random() * 10) + 1;
                        const b = Math.floor(Math.random() * 10) + 1;
                        const op = Math.random() > 0.5 ? '+' : '-';
                        const question = op === '+' 
                            ? `Solve for x: x + ${a} = ${a + b}`
                            : `Solve for x: x - ${a} = ${b}`;
                        return {
                            question: question,
                            answer: b,
                            type: "Equation"
                        };
                    }
                },
                {
                    name: "Area Calculations",
                    generator: () => {
                        const side = Math.floor(Math.random() * 10) + 1;
                        const answer = (side * side).toFixed(2);
                        return {
                            question: `What is the area of a square with side length ${side}?`,
                            answer: parseFloat(answer),
                            type: "Area"
                        };
                    }
                }
            ]
        };

        // DOM Elements
        const elements = {
            problemsContainer: document.getElementById('problemsContainer'),
            currentProblemNum: document.getElementById('currentProblemNum'),
            currentProblemType: document.getElementById('currentProblemType'),
            currentProblem: document.getElementById('currentProblem'),
            answerInput: document.getElementById('answerInput'),
            checkAnswerBtn: document.getElementById('checkAnswer'),
            feedback: document.getElementById('feedback'),
            prevProblemBtn: document.getElementById('prevProblem'),
            nextProblemBtn: document.getElementById('nextProblem'),
            generateProblemsBtn: document.getElementById('generateProblems'),
            scoreElement: document.getElementById('score'),
            correctCountElement: document.getElementById('correctCount'),
            totalAttemptsElement: document.getElementById('totalAttempts'),
            progressFill: document.getElementById('progressFill'),
            calcResult: document.getElementById('calcResult'),
            useCalcResultBtn: document.getElementById('useCalcResult'),
            clearCalcBtn: document.getElementById('clearCalc')
        };

        // Initialize the system
        document.addEventListener('DOMContentLoaded', function() {
            generateProblems();
            setupEventListeners();
            setupCalculator();
            updateUI();
        });

        // Generate random problems
        function generateProblems() {
            mathSystem.problems = [];
            mathSystem.userAnswers = {};
            mathSystem.currentProblemIndex = 0;
            mathSystem.score = 0;
            mathSystem.correctCount = 0;
            mathSystem.totalAttempts = 0;
            
            // Generate 8 random problems
            for (let i = 0; i < 8; i++) {
                const typeIndex = Math.floor(Math.random() * mathSystem.problemTypes.length);
                const problem = mathSystem.problemTypes[typeIndex].generator();
                problem.id = i + 1;
                mathSystem.problems.push(problem);
            }
            
            renderProblems();
            updateUI();
        }

        // Render all problems in the left column
        function renderProblems() {
            elements.problemsContainer.innerHTML = '';
            
            mathSystem.problems.forEach((problem, index) => {
                const problemCard = document.createElement('div');
                problemCard.className = 'problem-card';
                if (index === mathSystem.currentProblemIndex) {
                    problemCard.classList.add('active');
                }
                
                problemCard.innerHTML = `
                    <div class="problem-header">
                        <div class="problem-number">${problem.id}</div>
                        <div class="problem-type">${problem.type}</div>
                    </div>
                    <div class="problem-statement">
                        <span class="math-expr">${problem.question}</span>
                    </div>
                    <div class="input-group">
                        <input 
                            type="text" 
                            class="answer-input problem-input" 
                            data-problem-id="${problem.id}"
                            placeholder="Your answer..."
                            value="${mathSystem.userAnswers[problem.id]?.answer || ''}"
                        >
                    </div>
                    ${mathSystem.userAnswers[problem.id] ? `
                        <div class="feedback ${mathSystem.userAnswers[problem.id].correct ? 'correct' : 'incorrect'}">
                            ${mathSystem.userAnswers[problem.id].correct ? 
                                '<i class="fas fa-check-circle"></i> Correct!' : 
                                '<i class="fas fa-times-circle"></i> Try again!'}
                        </div>
                    ` : ''}
                `;
                
                elements.problemsContainer.appendChild(problemCard);
                
                // Add event listener to problem input
                const input = problemCard.querySelector('.problem-input');
                input.addEventListener('focus', () => {
                    setCurrentProblem(index);
                });
                
                input.addEventListener('input', (e) => {
                    const value = e.target.value.trim();
                    if (value) {
                        // Check answer on input
                        const problemId = parseInt(e.target.dataset.problemId);
                        const problem = mathSystem.problems.find(p => p.id === problemId);
                        if (problem) {
                            checkProblemAnswer(problemId, value);
                        }
                    }
                });
            });
            
            // Update current problem display
            updateCurrentProblem();
        }

        // Set current problem
        function setCurrentProblem(index) {
            mathSystem.currentProblemIndex = index;
            updateCurrentProblem();
            renderProblems();
        }

        // Update current problem display
        function updateCurrentProblem() {
            const problem = mathSystem.problems[mathSystem.currentProblemIndex];
            if (!problem) return;
            
            elements.currentProblemNum.textContent = problem.id;
            elements.currentProblemType.textContent = problem.type;
            elements.currentProblem.innerHTML = `<span class="math-expr">${problem.question}</span>`;
            elements.answerInput.value = mathSystem.userAnswers[problem.id]?.answer || '';
            elements.answerInput.focus();
            
            // Update feedback
            if (mathSystem.userAnswers[problem.id]) {
                showFeedback(
                    mathSystem.userAnswers[problem.id].correct,
                    mathSystem.userAnswers[problem.id].answer,
                    problem.answer
                );
            } else {
                elements.feedback.className = 'feedback';
                elements.feedback.style.display = 'none';
            }
        }

        // Check answer for current problem
        function checkAnswer() {
            const answer = elements.answerInput.value.trim();
            const problem = mathSystem.problems[mathSystem.currentProblemIndex];
            
            if (!answer) {
                elements.feedback.className = 'feedback incorrect';
                elements.feedback.innerHTML = '<i class="fas fa-exclamation-circle"></i> Please enter an answer';
                elements.feedback.style.display = 'block';
                return;
            }
            
            // Clean the answer input
            const cleanedAnswer = cleanAnswerInput(answer);
            
            if (cleanedAnswer === null) {
                elements.feedback.className = 'feedback incorrect';
                elements.feedback.innerHTML = `
                    <i class="fas fa-exclamation-circle"></i> 
                    Invalid input. Please enter only numbers and decimal point.
                `;
                elements.feedback.style.display = 'block';
                return;
            }
            
            // Check the answer
            checkProblemAnswer(problem.id, cleanedAnswer);
        }

        // Check problem answer
        function checkProblemAnswer(problemId, userAnswer) {
            const problem = mathSystem.problems.find(p => p.id === problemId);
            if (!problem) return;
            
            const userNum = parseFloat(userAnswer);
            const correctNum = parseFloat(problem.answer);
            
            // Calculate tolerance based on problem type
            const tolerance = getTolerance(problem.type);
            const isCorrect = Math.abs(userNum - correctNum) <= tolerance;
            
            // Store user answer
            mathSystem.userAnswers[problemId] = {
                answer: userAnswer,
                correct: isCorrect
            };
            
            // Update statistics
            if (isCorrect && !mathSystem.userAnswers[problemId].previouslyCorrect) {
                mathSystem.score += 10;
                mathSystem.correctCount++;
            }
            mathSystem.totalAttempts++;
            
            // Update UI
            updateUI();
            renderProblems();
            
            // Show feedback
            if (problemId === mathSystem.problems[mathSystem.currentProblemIndex].id) {
                showFeedback(isCorrect, userAnswer, correctNum);
            }
            
            // Mark as previously correct
            if (isCorrect) {
                mathSystem.userAnswers[problemId].previouslyCorrect = true;
            }
        }

        // Show feedback
        function showFeedback(isCorrect, userAnswer, correctAnswer) {
            if (isCorrect) {
                elements.feedback.className = 'feedback correct';
                elements.feedback.innerHTML = `
                    <i class="fas fa-check-circle"></i> 
                    Correct! 
                    <span style="display: block; margin-top: 10px; font-size: 0.9rem; font-weight: normal;">
                        You answered: <strong>${userAnswer}</strong>
                    </span>
                `;
            } else {
                elements.feedback.className = 'feedback incorrect';
                elements.feedback.innerHTML = `
                    <i class="fas fa-times-circle"></i> 
                    Incorrect. 
                    <span style="display: block; margin-top: 10px; font-size: 0.9rem; font-weight: normal;">
                        You answered: <strong>${userAnswer}</strong><br>
                        Correct answer: <span class="correct-answer">${correctAnswer}</span>
                    </span>
                `;
            }
            elements.feedback.style.display = 'block';
        }

        // Clean answer input - remove symbols, convert to number
        function cleanAnswerInput(input) {
            // Remove any non-numeric characters except decimal point and minus sign
            const cleaned = input.replace(/[^0-9.-]/g, '');
            
            // Check if it's a valid number
            if (!cleaned || isNaN(parseFloat(cleaned))) {
                return null;
            }
            
            // Parse as float and round to 2 decimal places
            const num = parseFloat(cleaned);
            return Math.round(num * 100) / 100;
        }

        // Get tolerance for different problem types
        function getTolerance(problemType) {
            switch(problemType) {
                case 'Square Root':
                case 'Area':
                    return 0.01; // More precise
                case 'Pi Multiple':
                    return 0.05; // Approximation of π
                case 'Fraction Conversion':
                    return 0.01;
                case 'Equation':
                    return 0; // Exact for equations
                default:
                    return 0.01;
            }
        }

        // Update UI elements
        function updateUI() {
            elements.scoreElement.textContent = mathSystem.score;
            elements.correctCountElement.textContent = mathSystem.correctCount;
            elements.totalAttemptsElement.textContent = mathSystem.totalAttempts;
            
            // Update progress
            const totalProblems = mathSystem.problems.length;
            const answeredProblems = Object.keys(mathSystem.userAnswers).length;
            const progress = totalProblems > 0 ? (answeredProblems / totalProblems) * 100 : 0;
            elements.progressFill.style.width = `${progress}%`;
            
            // Update button states
            elements.prevProblemBtn.disabled = mathSystem.currentProblemIndex === 0;
            elements.nextProblemBtn.disabled = mathSystem.currentProblemIndex === mathSystem.problems.length - 1;
        }

        // Setup calculator
        function setupCalculator() {
            // Calculator buttons
            document.querySelectorAll('.calc-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const value = this.dataset.value;
                    let current = elements.calcResult.value;
                    
                    switch(value) {
                        case '√':
                            elements.calcResult.value = 'sqrt(';
                            break;
                        case 'π':
                            elements.calcResult.value += Math.PI.toFixed(5);
                            break;
                        case '½':
                            elements.calcResult.value += '0.5';
                            break;
                        case '÷':
                            elements.calcResult.value += '/';
                            break;
                        case '×':
                            elements.calcResult.value += '*';
                            break;
                        case '(-)':
                            if (current.startsWith('-')) {
                                elements.calcResult.value = current.slice(1);
                            } else {
                                elements.calcResult.value = '-' + current;
                            }
                            break;
                        default:
                            elements.calcResult.value += value;
                    }
                });
            });
            
            // Clear calculator
            elements.clearCalcBtn.addEventListener('click', () => {
                elements.calcResult.value = '';
            });
            
            // Use calculator result as answer
            elements.useCalcResultBtn.addEventListener('click', () => {
                try {
                    let expression = elements.calcResult.value;
                    
                    // Replace symbols with JavaScript equivalents
                    expression = expression
                        .replace(/sqrt\(/g, 'Math.sqrt(')
                        .replace(/π/g, Math.PI.toString())
                        .replace(/÷/g, '/')
                        .replace(/×/g, '*');
                    
                    // Evaluate the expression
                    const result = eval(expression);
                    
                    if (typeof result === 'number' && !isNaN(result)) {
                        elements.answerInput.value = Math.round(result * 100) / 100;
                        elements.calcResult.value = '';
                    } else {
                        alert('Invalid calculation. Please check your expression.');
                    }
                } catch (error) {
                    alert('Error in calculation. Please check your expression.');
                }
            });
        }

        // Setup event listeners
        function setupEventListeners() {
            // Check answer button
            elements.checkAnswerBtn.addEventListener('click', checkAnswer);
            
            // Enter key to check answer
            elements.answerInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    checkAnswer();
                }
            });
            
            // Navigation buttons
            elements.prevProblemBtn.addEventListener('click', () => {
                if (mathSystem.currentProblemIndex > 0) {
                    setCurrentProblem(mathSystem.currentProblemIndex - 1);
                }
            });
            
            elements.nextProblemBtn.addEventListener('click', () => {
                if (mathSystem.currentProblemIndex < mathSystem.problems.length - 1) {
                    setCurrentProblem(mathSystem.currentProblemIndex + 1);
                }
            });
            
            // Generate new problems
            elements.generateProblemsBtn.addEventListener('click', generateProblems);
        }

        // Add custom CSS for calculator buttons
        const style = document.createElement('style');
        style.textContent = `
            .calc-btn {
                padding: 15px;
                border: 2px solid #dee2e6;
                background: white;
                border-radius: 8px;
                font-size: 1.2rem;
                font-weight: bold;
                cursor: pointer;
                transition: all 0.3s ease;
            }
            
            .calc-btn:hover {
                background: #667eea;
                color: white;
                border-color: #667eea;
                transform: translateY(-2px);
            }
            
            .calc-btn[data-value="√"],
            .calc-btn[data-value="π"],
            .calc-btn[data-value="½"] {
                background: #e3f2fd;
                color: #1565c0;
            }
            
            .calc-btn[data-value="÷"],
            .calc-btn[data-value="×"],
            .calc-btn[data-value="-"],
            .calc-btn[data-value="+"] {
                background: #fff3e0;
                color: #ef6c00;
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>
